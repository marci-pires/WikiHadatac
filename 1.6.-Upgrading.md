## 1.6.1. General Instructions for Upgrading HADatAc code

As described in [Section 2.1](https://github.com/paulopinheiro1234/hadatac/wiki/2.1.-Software-Configuration), if HADatAc is installed on "[HADatAc_home]", the actual configuration folder for the installation is in "__[HADatAc_home]/conf__". It is important to note, however, that content in the conf folder in github __is not assumed__ to be universally used, and that __making a personal copy of your configuration folder__ is strongly recommended before any software upgrade. 

It is recommended for copies of the configuration folder outside of "[HADatAc_home]" so that an update of the git repository from github, i.e., `git pull`, is not going to override your local configuration files. For instance, the folder "__[HADatAc]/../conf__" is an example of a folder outside of "__[HADatAc]__" that is not modified during `git pull`, and that can be used to store local configuration files.

## 1.6.2. Upgrading Development Installation

In development environments, the software developer is responsible for copying and restoring the HADatAc configuration folder for its local installations. 

### Step 1 (Development): Stop HADatAc 

By issuing a <CTLR>-C inside of the terminal running sbt, one can stop HADatAc in development

### Step 2 (Development): Copy __[HADatAc_home]/conf__ to a folder ouside of __[HADatAc_home]__ 

### Step 3 (Development): Upgrade HADatAc code in local git

Go to __[HADatAc_home]__. In the command below, replace [HADatAc_home] with the actual path of the home folder:

    cd [HADatAc_home]

Issue the following command from __[HADatAc_home]__:

     git pull

This command will update the content of your local git repository
 
### Step 3 (Development): Restore original configuration

Copy the conf folder from its location outside the 

### Step 4 (Development): Restart sbt

Still from inside of [HADatAc_home], execute the following command:

    sbt run

## 1.6.3. Upgrading Production Installation

Be aware about the note in [Section 1.6.1.]. Please also be aware the the upgrading script will also take care of backing up you configuration folder, as well as form restoring it after a git pull
 
### Step 1 (Production): Stop SOLR, Blazegraph and HADatAc

Go to __[solr_home]/solr__ folder and stop solr

    cd [solr_home]/solr
    ./run_solr6.sh stop

Stop the web container (jetty8,jetty9,tomcat8, or tomcat9) used to host blazegraph

    service jetty9 stop

Stop HADatAc 

    service hadatac stop

### Step 2 (Production): Execute Upgrading Script

Go to [HADatAc_home]

Execute the following command:
    
    ./deploy_hadatac.sh

Wait for the script to execute, generate a new distribution file, and deploy the distribution file.

### Step 3 (Production): Restart SOLR, Blazegraph and HADatAc

Go to solr folder and start solr

    cd [solr_home]/solr
    ./run_solr6.sh start

Start the web container (jetty8,jetty9,tomcat8 or tomcat9) used to host blazegraph

    service jetty8 start

Start HADatAc 

    service hadatac start

